

mutation SignIn($email: String!, $password: String!) {
  SignIn(Email: $email, Password: $password) {
    Token
  }
}

mutation SignUp($login: String!, $password: String!, $email: String!) {
  SignUp(Login: $login, Password: $password, Email: $email) {
    Token
  }
}

query CurrentUser {
  CurrentUser {
    ...UserAttrs
  }
}

mutation UpdateCurrentUser($avatar: String) {
  UpdateCurrentUser(Avatar: $avatar) {
    ...UserAttrs
  }
}

fragment UserAttrs on User {
    Id
    Login
    Avatar
    Email
}

query ListRooms {
  ListRooms {
    ...RoomAttrs
  }
}

query GetRoomPlaylist($roomId: String!) {
  GetRoomPlaylist(RoomId: $roomId) {
    ...SourceAttrs
  }
}

mutation DeletePlaylistSource($roomId: String!, $sourceId: String!) {
  DeletePlaylistSource(RoomId: $roomId, SourceId: $sourceId) {
    ...SourceAttrs
  }
}

mutation UpdatePlaylistSourcePosition($roomId: String!, $sourceId: String!, $newPositionIndex: Int!) {
  UpdatePlaylistSourcePosition(RoomId: $roomId, SourceId: $sourceId, NewPositionIndex: $newPositionIndex) {
    ...SourceAttrs
  }
}

query GetRoomByKey($key: String!) {
  GetRoomByKey(Key: $key) {
    ...RoomAttrs
  }
}

mutation CreateRoom($name: String!, $type: RoomType, $image: String, $private: Boolean) {
  CreateRoom(Name: $name, Type: $type, Image: $image, Private: $private) {
    ...RoomAttrs
  }
}

mutation UpdateRoom($roomId: String!, $image: String, $private: Boolean, $type: RoomType, $name: String) {
  UpdateRoom(RoomId: $roomId, Image: $image, Private: $private, Type: $type, Name: $name) {
     ...RoomAttrs
  }
}

mutation DeleteRoom($roomId: String!) {
  DeleteRoom(RoomId: $roomId) {
    Id
  }
}

fragment RoomAttrs on Room {
    MediaInfo {
      ...MediaInfoAttrs
    }
    Id
    Likes
    Private
    Image
    Key
    Name
    Members {
      ...UserAttrs
    }
    Owner {
      Id
    }
}


fragment MediaInfoAttrs on MediaInfo {
  CurrentSeconds
  Source {
    Name
    Id
    Cover
  }
}

fragment SourceAttrs on PlaylistSource {
    Name
    Id
    Cover
    Index
}

mutation AddPlaylistSource($roomId: String!, $sourceUrl: String!) {
  AddPlaylistSource(RoomId: $roomId, SourceUrl: $sourceUrl) {
    ...SourceAttrs
  }
}

mutation LoadMedia($sourceId: String!, $roomId: String!) {
  LoadMedia(SourceId: $sourceId, RoomId: $roomId) {
    ...RoomAttrs
  }
}

mutation LikeRoom($roomId: String!) {
  LikeRoom(RoomId: $roomId) {
    Likes
  }
}

mutation RoomAction($roomId: String!, $action: String!, $arg: String!) {
  RoomAction(RoomId: $roomId, Action: $action, Arg: $arg) {
    ...RoomAttrs
  }
}

mutation InitConnection($sdp: ServerSDP!, $roomId: String!) {
  InitConnection(SDP: $sdp, RoomId: $roomId) {
    ...SDPClientAttrs
  }
}

fragment SDPClientAttrs on ClientSDP {
    Sdp
    Type
}

query AllStickers {
  AllStickers {
    Stickers
  }
}

